<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Event Booking page - Welcome and choose an Event</title>
    <style type="text/css">
        body {
            width: 800px;
            margin: auto;
        }
        .label{
            font-style: oblique;
        }

        .filterHighlight, strong{
            color: red;
            font-size: large;
        }

    </style>
</head>
<body>
<header>
    <h1>Welcome to our Event Booking App</h1>
</header>
<main>
    <!-- Events to filter out the last requirement -->
    <!-- prikaz na podatoci samo, filter -->
    <form th:method="GET" th:action="@{/event-list}">
        <label>Search event by Name: </label>
        <input type="text" name="searchName">
        <br>
        <br>
        <label>Search event by Rating: </label>
        <input type="text" name="searchRating"><br>
        <input type="submit" value="Filter">

        <section th:if="${searchString}">
            <h5>Filtered by name: <strong><th:block th:text="${searchString}"></th:block></strong></h5>
            <ul>
                <li th:each="filterEvent : ${filterEventsByName}">
                    <span class="filterHighlight"><th:block th:text="${filterEvent.name}"></th:block></span>
                    <span>(</span>
                    <th:block th:text="${filterEvent.description}"></th:block>
                    <span>)</span>
                    <th:block th:text="${filterEvent.popularityScore}"></th:block>
                </li>
            </ul>
        </section>
        <section th:if="${filterEventsByRating}">
            <h5>Filtered events with rating greater or equal to: <strong><th:block th:text="${searchRating}"></th:block></strong></h5>
            <ul>
                <li th:each="filterEvent : ${filterEventsByRating}">
                    <th:block th:text="${filterEvent.name}"></th:block>
                    <span>(</span>
                    <th:block th:text="${filterEvent.description}"></th:block>
                    <span>)</span>
                    <span class="filterHighlight"><th:block th:text="${filterEvent.popularityScore}"></th:block></span>
                </li>
            </ul>
        </section>
    </form>


    <form th:method="POST" th:action="@{/event-booking}">
        <h2>Choose an event:</h2>
        <!-- Display radio buttons for each event,
                the value should be the event name
                and the displayed text should be Name: <event_name>, Description: <event_description>, Rating: <popularity_score> -->
        <!-- prakjame podatoci preku request-ot =) -->
        <!--First choose an event -->
        <div th:each="event : ${events}">
            <input type="radio" name="event" th:value="${event.name}">
            <label>
                <span class="label">Name : </span><th:block th:text="${event.name}"></th:block>
                <span class="label">Description : </span><th:block th:text="${event.description}" ></th:block>
                <span class="label">Rating : </span><th:block th:text="${event.popularityScore}"></th:block>
            </label>
        </div>

        <!-- Second select number of tickets -->
        <form>
            <h2>Choose number of tickets:</h2>
            <input type="number" name="numTickets" min="1" max="10"><br/>
            <br/>
            <input type="submit" value="Book">
        </form>
    </form>
</main>
</body>
</html>