<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Event Booking page - Welcome and choose an Event</title>
    <style type="text/css">
        body {
            width: 800px;
            margin: auto;
        }
        .label{
            font-style: oblique;
            font-size: medium;
        }

        .filterHighlight, strong{
            color: darkcyan;
            font-size: large;
        }

        .notAvailableEvent{
            color: red;
            font-family: "Times New Roman";
            font-size: large;
        }

    </style>
</head>
<body>
<header>
    <h1>Welcome to our Event Booking App</h1>
</header>
<main>
    <!-- Filter events based on the location bonus -->
    <form th:method="GET" th:action="@{/event-list}">
        <h3>Filter by Location</h3>
        <label>Filter event by Name: </label>
        <input type="text" name="locationName">
        <br>
        <br>
        <label>Filter event by City: </label>
        <input type="text" name="locationCity">
        <br>
        <br>
        <label>Filter event by  Country: </label>
        <input type="text" name="locationCountry">
        <br>
        <input type="submit" value="Filter">

        <section th:if="${locationName}">
            <ul th:if="${locationsFilteredByName}">
                <li th:each="ev1 : ${locationsFilteredByName}">
                    <th:block th:text="${ev1.name}"></th:block>
                    <span>(</span>
                    <th:block th:text="${ev1.location}"></th:block>
                    <span>)</span>
                </li>
            </ul>
            <div th:if="${locationsFilteredByName.isEmpty()}">
                <p class="notAvailableEvent">No available events in location <th:block th:text="${locationName}"></th:block></p>
            </div>
        </section>
        <section th:if="${locationCity}">
            <ul th:if="${locationsFilteredByCity}">
                <li th:each="ev2 : ${locationsFilteredByCity}">
                    <th:block th:text="${ev2.name}"></th:block>
                    <span>(</span>
                    <th:block th:text="${ev2.location}"></th:block>
                    <span>)</span>
                </li>
            </ul>
            <div th:if="${locationsFilteredByCity.isEmpty()}">
                <p class="notAvailableEvent">No available events in location <th:block th:text="${locationCity}"></th:block></p>
            </div>
        </section>
        <section th:if="${locationCountry}">
            <ul th:if="${locationsFilteredByCountry}">
                <li th:each="ev3 : ${locationsFilteredByCountry}">
                    <th:block th:text="${ev3.name}"></th:block>
                    <span>(</span>
                    <th:block th:text="${ev3.location}"></th:block>
                    <span>)</span>
                </li>
            </ul>
            <div th:if="${locationsFilteredByCountry.isEmpty()}">
                <p class="notAvailableEvent">No available events in location <th:block th:text="${locationCountry}"></th:block></p>
            </div>
        </section>
    </form>
    <!-- Events to filter out the last requirement 9.-->
    <!-- prikaz na podatoci samo, filter -->
    <form th:method="GET" th:action="@{/event-list}">
        <h3>Search event</h3>
        <label>Search event by Name: </label>
        <input type="text" name="searchName">
        <br>
        <br>
        <label>Search event by Rating: </label>
        <input type="text" name="searchRating"><br>
        <input type="submit" value="Filter">

        <section th:if="${searchString}">
            <h5>Filtered by name: <strong><th:block th:text="${searchString}"></th:block></strong></h5>
            <ul>
                <li th:each="filterEvent : ${filterEventsByName}">
                    <span class="filterHighlight"><th:block th:text="${filterEvent.name}"></th:block></span>
                    <span>(</span>
                    <th:block th:text="${filterEvent.description}"></th:block>
                    <span>)</span>
                    <th:block th:text="${filterEvent.popularityScore}"></th:block>
                </li>
            </ul>
        </section>
        <section th:if="${filterEventsByRating}">
            <h5>Filtered events with rating greater or equal to: <strong><th:block th:text="${searchRating}"></th:block></strong></h5>
            <ul>
                <li th:each="filterEvent : ${filterEventsByRating}">
                    <th:block th:text="${filterEvent.name}"></th:block>
                    <span>(</span>
                    <th:block th:text="${filterEvent.description}"></th:block>
                    <span>)</span>
                    <span class="filterHighlight"><th:block th:text="${filterEvent.popularityScore}"></th:block></span>
                </li>
            </ul>
        </section>
    </form>


    <form th:method="POST" th:action="@{/event-booking}">
        <h2>Choose an event:</h2>
        <!-- Display radio buttons for each event,
                the value should be the event name
                and the displayed text should be Name: <event_name>, Description: <event_description>, Rating: <popularity_score> -->
        <!-- prakjame podatoci preku request-ot =) -->
        <!--First choose an event -->
        <div th:each="event : ${events}">
            <input type="radio" name="event" th:value="${event.name}">
            <label>
                <span class="label"><b>Name : </b></span><th:block th:text="${event.name}"></th:block>
                <span class="label"><b>Description : </b></span><th:block th:text="${event.description}" ></th:block>
                <span class="label"><b>Rating : </b></span><th:block th:text="${event.popularityScore}"></th:block></label>
                <span class="label"><b>Location : </b></span><th:block th:text="${event.location}"></th:block></label>
        </div>

        <!-- Second select number of tickets -->
        <form>
            <h2>Choose number of tickets:</h2>
            <input type="number" name="numTickets" min="1" max="10"><br/>
            <br/>
            <input type="submit" value="Book">
        </form>
    </form>
</main>
</body>
</html>